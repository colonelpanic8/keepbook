#+TITLE: Keepbook
#+AUTHOR:
#+OPTIONS: toc:2

* Overview

Keepbook is an open-source personal finance manager designed for data ownership and transparency. Unlike Mint or Quicken Simplifi, your financial data lives in a human-readable, git-backed format that you control completely.

* Core Principles

** Data Ownership
Your financial data is yours. It lives in plain text files (JSON/JSONL) that you can read, edit, backup, and move without any proprietary tooling. No vendor lock-in, no data hostage situations.

** Git-Native Storage
The entire data store is designed to work with git:
- Free hosting on GitHub, GitLab, Codeberg, or self-hosted Gitea
- Complete audit trail of every change
- Branch and merge for experiments
- Works offline, sync when convenient

** Extensible Sync
Bank integrations are first-class but pluggable. Add new providers (Plaid, direct bank APIs, file imports) through a clean abstraction. The goal is that adding a new data source should be straightforward.

** Balances as Truth
Account balances are tracked independently, not just derived from transactions. Real-world banking is messy—fees aren't always reported, interest accrues silently, transfers get weird. Balance snapshots are the ground truth.

* Architecture

** Headless Core
The core is a Rust library/CLI that handles:
- Provider abstraction for fetching data
- Sync orchestration and scheduling
- Deduplication and conflict resolution
- Reading/writing the storage format
- Git operations

Frontends (web, mobile, CLI) are built separately and consume the core however makes sense—direct library usage, CLI invocation, HTTP API, or WASM. This decision is deferred intentionally.

** Storage Format

Account-separated, monthly time-sharded, with connections as a distinct concept:

#+BEGIN_SRC
data/
  connections/
    plaid-chase-abc123/
      connection.json         # credentials ref, sync state, institution info
    plaid-amex-def456/
      connection.json

  accounts/
    chase-checking-a1b2/
      account.json            # metadata, references parent connection
      2024/
        01-balances.json      # balance snapshots for January
        01-transactions.json  # transactions for January
        02-balances.json
        02-transactions.json
    chase-savings-e5f6/
      account.json            # same connection, different account
      2024/
        ...
    amex-platinum-c3d4/
      account.json
      2024/
        ...
#+END_SRC

- *Connections* represent a sync source (Plaid item, bank login, file import). One sync can produce multiple accounts.
- *Accounts* are the actual financial accounts. Each references its parent connection.
- One directory per account (named by institution + type + last 4 or hash)
- Monthly sharding keeps files small and diffs clean
- JSONL where append-friendly matters, JSON where structure matters

* MVP Scope

The initial focus is narrow:

1. *Account + Balance Storage* — Track accounts and their balance history over time
2. *Transaction Storage* — Store transactions in the defined format
3. *Provider Abstraction* — Clean trait/interface for data sources
4. *Sync Engine* — Orchestrate fetching, deduplicating, and persisting
5. *Git Integration* — Commit changes automatically or on-demand

What's explicitly *not* in MVP:
- Categories and auto-categorization rules
- Budgets
- Reports and visualizations
- Web/mobile UI
- Split transactions
- Recurring transaction detection

These come later, built on top of solid storage and sync foundations.

* Future Directions

- Category system with hierarchies and rules
- Payee/merchant normalization
- Tags and split transactions
- Budgeting with targets and alerts
- Investment account support (holdings, cost basis)
- Multi-currency support
- Web and mobile interfaces

* Why "Keepbook"?

Bookkeeping, but you keep the books. Yourself. Forever.

* License

TBD — likely MIT or Apache 2.0 for maximum openness.
