#+TITLE: Equity Price Sources
#+AUTHOR:
#+OPTIONS: toc:2

* Scope
Implement equity daily-close sources and wire them into the =EquityPriceSource= trait.

* Files
- New modules under =src/market_data/providers/=, one per source.
- Each module exports a type that implements =EquityPriceSource=.

* Common behavior
- Input is =Asset::Equity { ticker, exchange }=.
- Return =PricePoint= with:
  - =kind= "close"
  - =quote_currency= from provider response
  - =as_of_date= in exchange local date (provider daily series date)
- On missing data, return =Ok(None)= rather than error.

* Symbol mapping
- Use provider-specific symbol formats.
- If =exchange= is present, prefer provider mapping for that exchange.
- If =exchange= is missing, default to provider's primary listing behavior.

* Sources to implement
** EODHD
- Daily EOD endpoint with optional exchange suffix.
- Free tier limits: very low volume, cache aggressively.

** Twelve Data
- Daily time series endpoint.
- Free tier covers US equities; international symbols may be limited.

** Alpha Vantage
- TIME_SERIES_DAILY endpoint.
- 25 requests/day free tier.

** Marketstack
- EOD endpoint.
- Very low free request limit.

* Tests
- Unit tests for parsing provider responses into =PricePoint=.
- Use HTTP fixtures or sample JSON to avoid live calls.

* TODOs
- Decide provider priority ordering (config).
- Add exchange code normalization rules (e.g., XNAS vs NASDAQ).
